---
title: "【AWS S3】AWS CLI で S3 Bucket に格納されているファイルを検索表示する"
emoji: "🟠"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [aws,CLI]
published: false
---

## はじめに
S3 で 指定 Bucket に格納されているファイルを検索表示する。


## 💡 結論

:::message
`grep` `-e` option で繋げ、 `or` 条件で、指定ファイルを表示する。
<br>

```bash
$ aws s3 ls s3://<bucket name> | grep -e <検索ワード1> -e <検索ワード2> ...
```
:::



1. bucket にある中身を全表示して確認
まずは、どのファイルが Bucket に格納されているか、全一覧を表示してみます。

```bash:AWS CLI
# In
$ aws s3 ls s3://bucket

# Out
2021-10-31 16:51:17       7530 file_211021.json
2021-10-31 16:51:24       7530 file_211022.json
2021-10-31 16:51:23       7530 file_211023.json
2021-10-31 16:51:23       7530 file_211024.json
2021-10-31 16:51:21       7530 file_211025.json
2021-10-31 16:51:20       7530 file_211026.json
2021-10-31 16:51:20       7530 file_211027.json
2021-10-31 16:51:22       7530 file_211028.json
2021-10-31 16:51:22       7530 file_211029.json
2021-10-31 16:51:21       7530 file_211030.json
2021-10-31 16:51:18       7530 file_211031.json

```

2. 表示させたいファイルを条件検索で表示する
今回は、`file_211021.json`, `ile_211022.json` を検索してみます!

```bash:AWS CLI
# In
$ aws s3 ls s3://bucket | grep -e 211021.json -e 211022.json

# Out
2021-10-31 16:51:17       7530 file_211021.json
2021-10-31 16:51:24       7530 file_211022.json
```
条件にかけたファイルが検索表示できてますね!

## ✏️まとめ
grep コマンドを組み合わせることで、目的のファイルを検索表示することができました!
コマンドは冗長なので、シェルスクリプトで書くと良さそうです。まだ、よく分かっていないので引き続き試してみようと思います!!

ありがとうございました!!


## 👉 参考
- [バケットとオブジェクトの一覧表示](https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-services-s3-commands.html#:~:text=s3%20mb%20%E3%81%AE%E4%BE%8B-,%E3%83%90%E3%82%B1%E3%83%83%E3%83%88%E3%81%A8%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%B8%80%E8%A6%A7%E8%A1%A8%E7%A4%BA,-%E3%83%90%E3%82%B1%E3%83%83%E3%83%88%E3%80%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%80%81%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88)
